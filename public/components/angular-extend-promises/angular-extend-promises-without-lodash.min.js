/*!
 * angular-extend-promises v1.0.0-rc.2 - 2014-12-12
 * (c) 2014 L.systems SARL, Etienne Folio, Quentin Raynaud
 * https://bitbucket.org/lsystems/angular-extend-promises
 * License: MIT
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(function(){try{return require("../tmp/lodash")}catch(t){}}()):"function"==typeof define&&define.amd?define(["../tmp/lodash"],n):"object"==typeof exports?exports["angular-extend-promises"]=n(function(){try{return require("../tmp/lodash")}catch(t){}}()):t["angular-extend-promises"]=n(t["../tmp/lodash"])}(this,function(t){return function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){"use strict";angular.module("angular-extend-promises",[]).provider("angularExtendPromises",function(){this.options={compatibilityAliases:!0,disableES5Methods:!1},this.$get=function(){return this.options}}).config(["$provide",function(t){if(angular.mock)for(var n in r.c)delete r.c[n];t.decorator("$q",["$delegate","angularExtendPromises",function(t,n){var e=r(1);return e.$delegate=t,e.$options=n,r(2)}])}])},function(t,n,r){"use strict";var e=r(3);e.extend(t.exports,{$defer:e.noop(),$delegate:{},$options:{}})},function(t,n,r){"use strict";var e=r(3),o=r(1),i=r(4),u=t.exports=function(t){if(!e.isFunction(t))throw new Error("resolver should be a function");var n=u.defer();try{t(n.resolve,n.reject)}catch(r){n.reject(r)}return n.promise};e.extend(u,{all:r(5),any:r(6),bind:r(7),defer:r(8),each:r(9),filter:r(10),map:r(11),join:r(12),method:r(13),props:r(14),reduce:r(15),reject:r(16),resolve:r(17),some:r(18),when:r(19),AggregateError:i.AggregateError,TimeoutError:i.TimeoutError}),o.$options.compatibilityAliases&&e.extend(u,{attempt:r(20)}),o.$options.disableES5Methods||e.extend(u,{"try":r(20)})},function(t,n,r){"use strict";try{t.exports=r(21)}catch(e){t.exports=_}},function(t){"use strict";var n=t.exports.NewQError=function(t){this.name=this.constructor.name,Error.apply(this,arguments),this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack};n.prototype.toString=function(){return this.stack.toString()},n.subError=function(t,r){function e(){}r=r||n,e.prototype=r.prototype,t.prototype=new e,t.prototype.constructor=t,t.subError||(t.subError=function(r){n.subError(r,t)})},n.subError(n,Error);var r=t.exports.AggregateError=function(){n.apply(this,arguments)};n.subError(r);var e=t.exports.TimeoutError=function(){n.apply(this,arguments)};n.subError(e)},function(t,n,r){"use strict";var e=r(3),o=r(24),i=r(1),u=r(2);t.exports=function(t){return e.isArray(t)?(t=e.map(t,function(t){return u.when(t)}),o(i.$delegate.all(t))):u.props(t)}},function(t,n,r){"use strict";var e=r(2);t.exports=function(t){return e.some(t,1).get(0)}},function(t,n,r){"use strict";var e=r(2);t.exports=function(t){return e.resolve().bind(t)}},function(t,n,r){"use strict";var e=r(24),o=r(1);o.$defer=function(t){var n=o.$delegate.defer();return n.promise=e(n.promise,t),n},t.exports=function(){return o.$defer()}},function(t,n,r){"use strict";var e=r(22);t.exports=e("tap")},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(t,n,r){return o.map(t,function(t){return o.props({val:t,toFilter:n.apply(null,arguments)})},r).then(function(t){return e.map(e.filter(t,"toFilter"),"val")})}},function(t,n,r){"use strict";var e=r(22);t.exports=e("then")},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(){var t=e.toArray(arguments),n=t.pop();return o.all(t).spread(n)}},function(t,n,r){"use strict";var e=r(20);t.exports=function(t){return function(){return e(t,arguments,this)}}},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(t){return o.all(e.values(t)).then(function(n){return e.object(e.keys(t),n)})}},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(t,n,r){return e.reduce(t,function(r,e,i){return o.join(r,e,function(r,e){return n(r,e,i,t.length)})},o.resolve(r))}},function(t,n,r){"use strict";var e=r(23);t.exports=e("reject")},function(t,n,r){"use strict";var e=r(2),o=r(23);t.exports=o("resolve")||function(t){var n=e.defer();return n.resolve(t),n.promise}},function(t,n,r){"use strict";var e=r(3),o=r(2),i=r(4).AggregateError;t.exports=function(t,n){if(t.length<n)return o.reject(new i("initial array length ("+t.length+") > count ("+n+")"));var r=0,u=[],s=o.defer();return e.each(t,function(e){o.when(e).tap(function(t){null!==u&&(u.push(t),u.length>=n&&(s.resolve(u),u=null))}).$$catch(function(){null!==u&&(++r,t.length-r<n&&(s.reject(new i("Cannot resolve promise: too many rejections ("+r+")")),u=null))})}),s.promise}},function(t,n,r){"use strict";var e=r(23);t.exports=e("when")},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(t,n,r){try{return e.isEmpty(n)||e.isArray(n)||e.isArguments(n)||(n=[n]),o.when(t.apply(r||this,n))}catch(i){return o.reject(i)}}},function(n){if("undefined"==typeof t){var r=new Error('Cannot find module "../tmp/lodash"');throw r.code="MODULE_NOT_FOUND",r}n.exports=t},function(t,n,r){"use strict";var e=r(3),o=r(2),i=r(25),u=r(26);t.exports=function(t){return function(n,r,s){s=e.pick(s,"concurrency");var c=s.concurrency?new i(s):{add:function(t){return t()}},a=e.map(n,function(e,i){return o.when(e)[t](function(t){return c.add(function(){return o.when(r.call(null,t,i,n.length))})})}),l=o.all(a);return u(l,"$$unsynced",a),l}}},function(t,n,r){"use strict";var e=r(24),o=r(1);t.exports=function(t){return t in o.$delegate?function(){return e(o.$delegate[t].apply(o.$delegate,arguments))}:null}},function(t,n,r){"use strict";function e(t,n){s(this,"$$state",t.$$state),o.each(o.methods(t),function(n){s(this,"$$"+n,t[n])},this),n&&n.$$boundTo&&s(this,"$$boundTo",n.$$boundTo),s(this,"$$arrayListeners",[]),this.then=t.then=this.then.bind(this)}var o=r(3),i=r(1),u=r(27),s=r(26),c={"catch":"caught","finally":"lastly","return":["thenReturn","returns"],"throw":["thenThrow"]};t.exports=function(t,n){return new e(t,n)},e.prototype={all:u("all"),any:u("any"),bind:r(28),call:r(29),"catch":r(30),delay:r(31),done:r(32),each:u("each"),filter:u("filter"),"finally":function(){return this.$$finally.apply(this,arguments)},get:r(33),map:u("map"),nodeify:r(34),props:u("props"),reduce:u("reduce"),"return":r(35),some:u("some"),spread:r(36),tap:r(37),then:r(38),"throw":r(39),timeout:r(40),constructor:e},s(e.prototype,"$$callArrayListeners",function(t){o.each(this.$$arrayListeners,function(n){n(t)})}),o.each(c,function(t,n){o.isArray(t)||(t=[t]),i.$options.compatibilityAliases&&o.each(t,function(t){e.prototype[t]=e.prototype[n]}),i.$options.disableES5Methods&&delete e.prototype[n]})},function(t,n,r){"use strict";var e=r(3),o=r(1),i=t.exports=function(t){this.$options=e.defaults(t,{concurrency:1,maxQueue:0}),this.$fns=[]};i.prototype.add=function(t){var n=o.$defer(),r=function(){t()["finally"](function(){this.$fns.splice(this.$fns.indexOf(r),1),this.$fns.length>=this.$options.concurrency&&this.$fns[this.$options.concurrency-1]()}.bind(this)).then(function(t){n.resolve(t)},function(t){n.reject(t)})}.bind(this);return this.$fns.push(r)<=this.$options.concurrency&&r(),n.promise}},function(t){"use strict";t.exports=function(t,n,r){if(Object.defineProperty)try{Object.defineProperty(t,n,{value:r})}catch(e){}t[n]!==r&&(t[n]=r)}},function(t,n,r){"use strict";var e=r(41),o=r(2),i=r(26);t.exports=function(t){function n(n,r){var e=o[t].apply(null,[r].concat(n));return i(e,"$$boundTo",this.$$boundTo),e}return function(){var t=e.call(this,arguments);if(this.$$unsynced)return n.call(this,t,this.$$unsynced);var r=this.then(function(e){if(r.$$promiseResult)return r.$$promiseResult;var o=n.call(this,t,e);return r.$$arrayListeners.length&&o.$$unsynced&&r.$$callArrayListeners(o.$$unsynced),o}.bind(this));return this.$$arrayListeners.push(function(e){i(this,"$$promiseResult",n.call(this,t,e)),r.$$arrayListeners.length&&this.$$promiseResult.$$unsynced&&r.$$callArrayListeners(this.$$promiseResult.$$unsynced)}.bind(this)),r}}},function(t,n,r){"use strict";var e=r(26);t.exports=function(t){return e(this,"$$boundTo",t),this}},function(t,n,r){"use strict";var e=r(3);t.exports=function(){var t=e.toArray(arguments),n=t.shift();return this.then(function(r){return r[n].apply(r,t)})}},function(t,n,r){"use strict";function e(t,n){var r=!t.length;return i.each(t,function(t){if(!i.isFunction(t))throw new Error("Invalid argument.");return t instanceof Error||t.prototype instanceof Error?(r=r||n instanceof t,!r):(r=r||t(n),!r)}),r}var o=r(2),i=r(3);t.exports=function(){var t=i.toArray(arguments),n=t.pop();return this.$$catch(function(r){return i.isFunction(n)&&e(t,r)?n.call(this,r):o.reject(r)})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){return this.then(function(n){var r=e.$defer(this);return setTimeout(r.resolve,t,n),r.promise}.bind(this))}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){return this.then.apply(this,arguments).$$catch(function(t){setTimeout(function(){throw t})}).$$finally(function(){return e.reject(new Error("Do not chain anything after calling done()!"))})}},function(t){"use strict";t.exports=function(t){return this.then(function(n){return n[t]})}},function(t,n,r){"use strict";var e=r(3),o=r(2);t.exports=function(t,n){return t=t||e.noop,n=n||{},this.then(function(r){var o=r;return o=n.spread&&e.isArray(o)?[null].concat(o):[null,o],t.apply(this,o),r},function(n){return t.call(this,n),o.reject(n)})}},function(t,n,r){"use strict";var e=r(3);t.exports=function(t){return this.then(e.constant(t))}},function(t,n,r){"use strict";var e=r(3);t.exports=function(t){return this.then(function(n){return e.isArray(n)||(n=[n]),t.apply(this,n)})}},function(t,n,r){"use strict";var e=r(2);t.exports=function(t){return this.then(function(n){return e.when(t.call(this,n)).returns(n)})}},function(t,n,r){"use strict";var e=r(41),o=r(24);t.exports=function(){return o(this.$$then.apply(this,e.call(this,arguments)),this)}},function(t,n,r){"use strict";var e=r(2);t.exports=function(t){return this.then(function(){return e.reject(t)})}},function(t,n,r){"use strict";var e=r(1),o=r(2);t.exports=function(t,n){var r=e.$defer(this),i=setTimeout(function(){r.reject(new o.TimeoutError(n||"Timed out after "+t+" ms"))},t);return this.then(function(t){r.resolve(t)},function(t){r.reject(t)})["finally"](clearTimeout.bind(null,i)),r.promise}},function(t,n,r){"use strict";var e=r(3);t.exports=function(t){return e.map(t,function(t){return e.isFunction(t)?t.bind(this.$$boundTo||this):t},this)}}])});
//# sourceMappingURL=angular-extend-promises-without-lodash.min.js.map