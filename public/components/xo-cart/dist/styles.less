/**
 * @fileOverview Shopping cart styles in Hermes header
 * @name Cart
 * @author Hermes UIE
 * @tested
 */


// Basic cart styles start

// This is the overall container for the cart
.cartContainer {
    float: left;
    display: block;

    width: 184px;
}

// This is the div that encompasses the cart, child of .cartContainer
.transactionDetailsContainer {
    .borderRadius(5px 5px 0 0);
    -webkit-tap-highlight-color: @tapHighlightColor;

    &.cart {
         #transactionCart {

            border-bottom: 0 none;
            border-color: #ddd #ddd -moz-use-text-color; // Fix this

            .arrow {
                background-position: -23px -10px;
            }
        }   

        .transctionCartDetails {
            visibility: visible;
            max-height: 530px;
        }
    }

    .merchantName {
        
        width: 92%;
        margin: 0px 15px 0;
        padding-bottom: 9px;

        font-size: 1em;

        //border-bottom: 1px solid #ccc;
    }
}

// This is the anchor directly inside #transactionDetails
.transactionDetails {
    display: block;
        
    padding-right: 1px;
    margin: 0 auto;

    overflow: auto;

    
    color: #393f44;

    &:hover,
    &:focus {
        text-decoration: none;
        background-image: none;
        color: #6C7378;
    }

    &:active {
        background-image: none;

        

        #yourCart {
            background-position: 5px -95px
        }
    }
}

#transactionCart.hasItems {
    &:hover,
    &:focus {
        .opacity(0.7);
    }
}



// This span encompasses #yourCart and #transactionCart
.totalWrapper {
    display: block;
    overflow: auto;
}

.hasNoItems .totalWrapper {
    background-image: none;
}

// This is the label that says "your cart"
#yourCart {
    float: left;
}

// This is the span that has the total amount
#transactionCart {
    float: right;
    z-index: 1;

    padding: 8px 0 0 0;
    margin-bottom: 0;
    border-bottom: 0;
    .boxSizing();
    border-color: #ddd;
    font-size: 1.00em;
    font-weight: bold;
    text-align: right;
    color: @textColor;
    .textShadow(1px 1px 1px #fff);
    background-size: 24px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    &:active {
        background-position: right -290px;
    }

    .cartIcon {
        display: inline-block;
        width: 15px;
        height: 14px;
        margin-right: 6px;
        .img-retina(@flatSprite, @flatSprite2x, @flatSpriteWidth, @flatSpriteHeight);
        background-position: 0 0;
    }
    .arrow {
        display: inline-block;
        margin: 5px 0 0 5px;
        width: 12px;
        height: 10px;
        .img-retina(@flatSprite, @flatSprite2x, @flatSpriteWidth, @flatSpriteHeight);
        background-position: -23px 0px;
    }

    span {
        vertical-align: middle;
    }
}

@-moz-document url-prefix() {
    #transactionCart .cartIcon {
        margin-top: -2px;
    }
}

// This is the div that encompasses the ul that has line item details. Its max-height is zero by default when it is collapsed
.transctionCartDetails {
    position: relative;

    overflow: hidden;
    max-height: 0;
    
    visibility: hidden;
    padding-bottom: 0;

    .transition(max-height .7s ease);

    .pointer {
        background: url("https://www.paypalobjects.com/webstatic/checkout/hermes/icon_flyoutArrow_up_2x.png") no-repeat scroll 0 0 transparent;
        height: 10px;
        position: absolute;
        right: 57px;
        top: 0;
        width: 34px;
    }
}

// This is the ul that has the line item details
.details {

    .boxSizing();
    padding: 10px 0 0;
    background: @white;
        
    .borderRadius();
    .boxShadow(1px 1px 1px 0px #ccc);

    ul {
        list-style-type: none;
        margin: 0;
        font-size: 0.85em;
        background-color: @lightBackgroundColor;
        border-radius: 0 0 5px 5px;
    }   

    li {
        margin: 0;
        padding: 1px 15px;
        overflow: auto;
        line-height: 20px;

        &.subTotal {
            padding: 10px 15px;
            margin-top: 5px;
            font-weight: bold;
            border-top: 1px solid #ccc;
        }

        &.actions {
            margin: 15px;
            padding: 10px 1px 10px 15px;
            border-top: 1px solid #ccc;
            .borderRadius(0 0 5px 5px);
            text-align: right;
        }
    }

}

// This is in the details ul's li, displays the notes
.notes {
    font-weight: normal;
    margin-top: 3px;
    line-height: 100%;
    width: 100%;
    overflow: hidden;
    min-height: 1em;

    white-space: nowrap;
    text-overflow: ellipsis;
}

// This is in the details ul's li, displays the item name
.itemName {
    margin-top: 3px;
    width: 42%;
    overflow: hidden;
    min-height: 1em;

    white-space: nowrap;
    text-overflow: ellipsis;
}

// This is in the details ul's li, displays the item price
.itemPrice {
    margin-top:3px;
    width: 57%;
    overflow: hidden;
    
    font-size: 1em;  // 14px
    text-align: right;
    white-space: nowrap;
    text-overflow: ellipsis;
    -webkit-font-feature-settings: "tnum";
}

.itemName,
.itemPrice,
.currencyCode {
  float: left;
}

// This is in the details ul's li, displays the currency code
.currencyCode {
    margin-top: 5px;
        
    font-size: 0.8em;  // 13px
    text-align: right;

    float: none;
}

// when the cart has no items
.hasNoItems.transactionDetails,
.hasNoItems.transactionDetails:active,
.hasNoItems.transactionDetails:focus,
#transactionDetails.cart .hasNoItems {
    float: right;

    background: none;
    border: none;
    box-shadow: none;
    cursor: default;

    #yourCart {
        display: none;
    }

    #transactionCart {
        padding: 8px 0 0 30px;

        width: auto;

       .arrow {
           display: none;
       }

        &:hover,
        &:focus {
            text-decoration: none;
            background-image: none;
            color: #393f44;
        }
        .cartIcon {
            background-position: 0 0;
        }

    }

}

#closeCart {
    position: absolute;
    top: 30px;
    right: 30px;
    .img-retina(@flatSprite, @flatSprite2x, @flatSpriteWidth, @flatSpriteHeight);
    background-position: -44px 0;
    width: 10px;
    height: 10px;

    &:hover, &:focus {
        background-position: -44px -15px;
        width: 10px;
        height: 11px;
    }
}
// .incontext .hasNoItems {

//  #transactionCart {
//      width: 100%;
//  }

// }

// Basic cart styles end 



// Largescreen-specific cart styling starts
.largeScreen {
    .transactionDetails {
        float: right;
        margin: 0;
    }

    #transactionDetails {
        position: relative;

        .transctionCartDetails {
            clear: both;
        }
    }
    
}

// Largescreen-specific cart styling ends


// VersionA-specific cart styles start, also apply to addcard and member review


    .cartContainer {
        float: right;
    }

    .transctionCartDetails {
        position: absolute;
        top: 35px;
        right: -20px;

        width: 300px;
    }

    .details {
        margin: 10px;
        box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.3);
        -webkit-box-shadow: 0 1px 2px 1px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: 0 1px 2px 1px rgba(0, 0, 0, 0.3);
        list-style-type: none;
    }

// VersionA-specific cart styles end


// Incontext, mobile and tablet form factor cart styles start
@media (max-width: 41.3125em) {


    .cartContainer {
        display: block;
        position: absolute;
        right: 15px;
        top: 10px;
        z-index: 151; // bootstrap-modal has z-index of 150, so..

        width: 160px;
    }

    .minibrowser .cartContainer {
        right: 0;
    }

    .transctionCartDetails {
        left: -140px;
        width: 310px;
    }


    .cartVerB header .cartContainer{
            display:block;
    }
    .cartVerB #main .cartContainer{
            display:none;
    }
    
    // these styles are ONLY for incontext
    .incontext,
    .incontext .pageMemberReview,
    .incontext .pageApplyForBml,
    .incontext .pageAddCard,
    .incontext .pageLanding,
    .incontext .pageEConsent,
    .incontext .pageGuestVerify,
    .incontext .pageLogin {

        .cartContainer {
            right: 35px;
            top: 12px;
        }

        .transctionCartDetails {
            width: 350px;
            left: -180px;
        }
    }   

    .incontext .cartContainer.hidePayPalLogo{
            right:214px;
    }

    .incontext .viewTypeOnePage .hidePayPalLogo{

        .transctionCartDetails{
            left:-15px;

            .pointer{
              right:300px;
            }
        }
    }
}

// mobile phones only
@media (min-width: 0) and (max-width: 30em) {
    .cartContainer {
        right: 0;
        top: 15px;
    }

    #closeCart {
        right: 20px;
    }

    .transactionDetails {
        padding-right: 0;
    }
}
